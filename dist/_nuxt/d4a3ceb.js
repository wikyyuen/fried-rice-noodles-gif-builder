(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{355:function(e,t,r){var n;!function(r,o,d,c){"use strict";var l,f,m={URL:r.URL||r.webkitURL||r.mozURL||r.msURL,getUserMedia:(f=d.getUserMedia||d.webkitGetUserMedia||d.mozGetUserMedia||d.msGetUserMedia,f?f.bind(d):f),requestAnimFrame:r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame,requestTimeout:function(e,t){if(e=e||m.noop,t=t||0,!m.requestAnimFrame)return setTimeout(e,t);var r=(new Date).getTime(),n=new Object,o=m.requestAnimFrame;return n.value=o((function d(){(new Date).getTime()-r>=t?e.call():n.value=o(d)})),n},Blob:r.Blob||r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,btoa:(l=r.btoa||function(input){for(var output="",i=0,e=input.length,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=void 0,n=void 0,o=void 0,d=void 0,c=void 0,l=void 0,f=void 0;i<e;)d=(r=input.charCodeAt(i++))>>2,c=(3&r)<<4|(n=input.charCodeAt(i++))>>4,l=(15&n)<<2|(o=input.charCodeAt(i++))>>6,f=63&o,isNaN(n)?l=f=64:isNaN(o)&&(f=64),output=output+t.charAt(d)+t.charAt(c)+t.charAt(l)+t.charAt(f);return output},l?l.bind(r):m.noop),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return m.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=o.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return r.Worker},blob:function(){return m.Blob},Uint8Array:function(){return r.Uint8Array},Uint32Array:function(){return r.Uint32Array},videoCodecs:function(){var e=o.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(e){}return t}()},noop:function(){},each:function(e,t){var r=void 0,n=void 0;if(m.isArray(e))for(r=-1,n=e.length;++r<n&&!1!==t(r,e[r]););else if(m.isObject(e))for(r in e)if(e.hasOwnProperty(r)&&!1===t(r,e[r]))break},mergeOptions:function(e,t){if(m.isObject(e)&&m.isObject(t)&&Object.keys){var r={};return m.each(e,(function(t,n){r[t]=e[t]})),m.each(t,(function(n,o){var d=t[n];m.isObject(d)&&e[n]?r[n]=m.mergeOptions(e[n],d):r[n]=d})),r}},setCSSAttr:function(e,t,r){m.isElement(e)&&(m.isString(t)&&m.isString(r)?e.style[t]=r:m.isObject(t)&&m.each(t,(function(t,r){e.style[t]=r})))},removeElement:function(e){m.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(content){if(!m.isString(content))return{};try{var e=new m.Blob([content],{type:"text/javascript"}),t=m.URL.createObjectURL(e);return{objectUrl:t,worker:new Worker(t)}}catch(e){return""+e}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{};if(!o.body||!1===e.resizeFont)return e.fontSize;var text=e.text,t=e.gifWidth,r=parseInt(e.fontSize,10),n=parseInt(e.minFontSize,10),div=o.createElement("div"),span=o.createElement("span");for(div.setAttribute("width",t),div.appendChild(span),span.innerHTML=text,span.style.fontSize=r+"px",span.style.textIndent="-9999px",span.style.visibility="hidden",o.body.appendChild(span);span.offsetWidth>t&&r>=n;)span.style.fontSize=--r+"px";return o.body.removeChild(span),r+"px"},webWorkerError:!1},h=Object.freeze({default:m}),v={validate:function(e){e=m.isObject(e)?e:{};var t={};return m.each(v.validators,(function(r,n){var o=n.errorCode;if(!e[o]&&!n.condition)return(t=n).error=!0,!1})),delete t.condition,t},isValid:function(e){var t=!0!==v.validate(e).error;return t},validators:[{condition:m.isFunction(m.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:m.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:m.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:m.isFunction(m.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:m.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:m.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:m.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},w=Object.freeze({default:v}),y=function(){},S={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:y,completeCallback:y,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},C=Object.freeze({default:S});function k(){return v.isValid()}function x(){var e,t,r,n,o,d=256,c=499,l=491,f=487,m=503,h=3*m,v=d-1,w=4,y=100,S=16,C=1<<S,k=10,x=10,F=C>>x,O=C<<k-x,W=d>>3,E=6,A=1<<E,U=W*A,R=30,M=10,T=1<<M,I=8,j=1<<I,V=M+I,z=1<<V,H=[],L=[],B=[],P=[];function N(e,c,l){var i,p;for(t=e,r=c,n=l,o=new Array(d),i=0;i<d;i++)o[i]=new Array(4),(p=o[i])[0]=p[1]=p[2]=(i<<w+8)/d|0,B[i]=C/d|0,L[i]=0}function D(){for(var map=[],e=new Array(d),i=0;i<d;i++)e[o[i][3]]=i;for(var t=0,r=0;r<d;r++){var n=e[r];map[t++]=o[n][0],map[t++]=o[n][1],map[t++]=o[n][2]}return map}function G(){var i,e,t,r,p,q,n,c;for(n=0,c=0,i=0;i<d;i++){for(t=i,r=(p=o[i])[1],e=i+1;e<d;e++)(q=o[e])[1]<r&&(t=e,r=q[1]);if(q=o[t],i!=t&&(e=q[0],q[0]=p[0],p[0]=e,e=q[1],q[1]=p[1],p[1]=e,e=q[2],q[2]=p[2],p[2]=e,e=q[3],q[3]=p[3],p[3]=e),r!=n){for(H[n]=c+i>>1,e=n+1;e<r;e++)H[e]=i;n=r,c=i}}for(H[n]=c+v>>1,e=n+1;e<256;e++)H[e]=v}function X(){var i,o,b,g,d,v,S,C,k,x,F,p,O,W;for(r<h&&(n=1),e=30+(n-1)/3,p=t,O=0,W=r,x=(F=r/(3*n))/y|0,C=T,(S=(v=U)>>E)<=1&&(S=0),i=0;i<S;i++)P[i]=C*((S*S-i*i)*j/(S*S));for(k=r<h?3:r%c!=0?3*c:r%l!=0?3*l:r%f!=0?3*f:3*m,i=0;i<F;)if(_(C,o=K(b=(255&p[O+0])<<w,g=(255&p[O+1])<<w,d=(255&p[O+2])<<w),b,g,d),0!==S&&Q(S,o,b,g,d),(O+=k)>=W&&(O-=r),0===x&&(x=1),++i%x==0)for(C-=C/e,(S=(v-=v/R)>>E)<=1&&(S=0),o=0;o<S;o++)P[o]=C*((S*S-o*o)*j/(S*S))}function map(b,g,e){var i,t,r,a,n,p,c;for(n=1e3,c=-1,t=(i=H[g])-1;i<d||t>=0;)i<d&&((r=(p=o[i])[1]-g)>=n?i=d:(i++,r<0&&(r=-r),(a=p[0]-b)<0&&(a=-a),(r+=a)<n&&((a=p[2]-e)<0&&(a=-a),(r+=a)<n&&(n=r,c=p[3])))),t>=0&&((r=g-(p=o[t])[1])>=n?t=-1:(t--,r<0&&(r=-r),(a=p[0]-b)<0&&(a=-a),(r+=a)<n&&((a=p[2]-e)<0&&(a=-a),(r+=a)<n&&(n=r,c=p[3]))));return c}function Y(){return X(),J(),G(),D()}function J(){var i;for(i=0;i<d;i++)o[i][0]>>=w,o[i][1]>>=w,o[i][2]>>=w,o[i][3]=i}function Q(e,i,b,g,t){var r,n,c,l,a,f,p;for((c=i-e)<-1&&(c=-1),(l=i+e)>d&&(l=d),r=i+1,n=i-1,f=1;r<l||n>c;){if(a=P[f++],r<l){p=o[r++];try{p[0]-=a*(p[0]-b)/z|0,p[1]-=a*(p[1]-g)/z|0,p[2]-=a*(p[2]-t)/z|0}catch(e){}}if(n>c){p=o[n--];try{p[0]-=a*(p[0]-b)/z|0,p[1]-=a*(p[1]-g)/z|0,p[2]-=a*(p[2]-t)/z|0}catch(e){}}}}function _(e,i,b,g,t){var r=o[i],n=e/T;r[0]-=n*(r[0]-b)|0,r[1]-=n*(r[1]-g)|0,r[2]-=n*(r[2]-t)|0}function K(b,g,e){var i,t,a,r,n,c,l,f,m,h;for(m=f=~(1<<31),l=c=-1,i=0;i<d;i++)(t=(h=o[i])[0]-b)<0&&(t=-t),(a=h[1]-g)<0&&(a=-a),t+=a,(a=h[2]-e)<0&&(a=-a),(t+=a)<f&&(f=t,c=i),(r=t-(L[i]>>S-w))<m&&(m=r,l=i),n=B[i]>>x,B[i]-=n,L[i]+=n<<k;return B[c]+=F,L[c]-=O,l}N.apply(this,arguments);var Z={};return Z.map=map,Z.process=Y,Z}function F(){try{this.onmessage=function(t){var r,data=t.data||{};data.gifshot&&(r=e.run(data),postMessage(r))}}catch(e){}var e={dataToRGB:function(data,e,t){for(var r=e*t*4,i=0,n=[];i<r;)n.push(data[i++]),n.push(data[i++]),n.push(data[i++]),i++;return n},componentizedPaletteToArray:function(e){e=e||[];for(var t=[],i=0;i<e.length;i+=3){var r=e[i],g=e[i+1],b=e[i+2];t.push(r<<16|g<<8|b)}return t},processFrameWithQuantizer:function(e,t,r,n){for(var o=this.dataToRGB(e,t,r),d=new x(o,o.length,n),c=d.process(),l=new Uint32Array(this.componentizedPaletteToArray(c)),f=t*r,m=new Uint8Array(f),h=0,i=0;i<f;i++){var v=o[h++],g=o[h++],b=o[h++];m[i]=d.map(v,g,b)}return{pixels:m,palette:l}},run:function(e){var t=e=e||{},r=t.height,n=(t.palette,t.sampleInterval),o=t.width,d=e.data;return this.processFrameWithQuantizer(d,o,r,n)}};return e}function O(e,t,r,n){var p=0,o=(n=n===c?{}:n).loop===c?null:n.loop,d=n.palette===c?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";e[p++]=71,e[p++]=73,e[p++]=70,e[p++]=56,e[p++]=57,e[p++]=97;if(e[p++]=255&t,e[p++]=t>>8&255,e[p++]=255&r,e[p++]=r>>8&255,e[p++]=0|(null!==d?128:0),e[p++]=0,e[p++]=0,null!==o){if(o<0||o>65535)throw"Loop count invalid.";e[p++]=33,e[p++]=255,e[p++]=11,e[p++]=78,e[p++]=69,e[p++]=84,e[p++]=83,e[p++]=67,e[p++]=65,e[p++]=80,e[p++]=69,e[p++]=50,e[p++]=46,e[p++]=48,e[p++]=3,e[p++]=1,e[p++]=255&o,e[p++]=o>>8&255,e[p++]=0}var l=!1;this.addFrame=function(t,r,n,o,f,m){if(!0===l&&(--p,l=!1),m=m===c?{}:m,t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(f.length<n*o)throw"Not enough pixels for the frame size.";var h=!0,v=m.palette;if(v!==c&&null!==v||(h=!1,v=d),v===c||null===v)throw"Must supply either a local or global palette.";for(var w=function(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}(v),y=0;w>>=1;)++y;w=1<<y;var S=m.delay===c?0:m.delay,C=m.disposal===c?0:m.disposal;if(C<0||C>3)throw"Disposal out of range.";var k=!1,x=0;if(m.transparent!==c&&null!==m.transparent&&(k=!0,(x=m.transparent)<0||x>=w))throw"Transparent color index.";if((0!==C||k||0!==S)&&(e[p++]=33,e[p++]=249,e[p++]=4,e[p++]=C<<2|(!0===k?1:0),e[p++]=255&S,e[p++]=S>>8&255,e[p++]=x,e[p++]=0),e[p++]=44,e[p++]=255&t,e[p++]=t>>8&255,e[p++]=255&r,e[p++]=r>>8&255,e[p++]=255&n,e[p++]=n>>8&255,e[p++]=255&o,e[p++]=o>>8&255,e[p++]=!0===h?128|y-1:0,!0===h)for(var i=0,F=v.length;i<F;++i){var O=v[i];e[p++]=O>>16&255,e[p++]=O>>8&255,e[p++]=255&O}p=function(e,p,t,r){e[p++]=t;var n=p++,o=1<<t,d=o-1,l=o+1,f=l+1,m=t+1,h=0,v=0;function w(t){for(;h>=t;)e[p++]=255&v,v>>=8,h-=8,p===n+256&&(e[n]=255,n=p++)}function y(e){v|=e<<h,h+=m,w(8)}var S=r[0]&d,C={};y(o);for(var i=1,k=r.length;i<k;++i){var x=r[i]&d,F=S<<8|x,O=C[F];if(O===c){for(v|=S<<h,h+=m;h>=8;)e[p++]=255&v,v>>=8,h-=8,p===n+256&&(e[n]=255,n=p++);4096===f?(y(o),f=l+1,m=t+1,C={}):(f>=1<<m&&++m,C[F]=f++),S=x}else S=O}y(S),y(l),w(1),n+1===p?e[n]=0:(e[n]=p-n-1,e[p++]=0);return p}(e,p,y<2?2:y,f)},this.end=function(){return!1===l&&(e[p++]=59,l=!0),p}}var W=function(){},E=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=W,this.onRenderProgressCallback=W,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};function A(e,t){e.getBase64GIF((function(image){t({error:!1,errorCode:"",errorMsg:"",image:image})}))}E.prototype={workerMethods:F(),initializeWebWorkers:function(e){var t,r=x.toString()+"("+F.toString()+"());",n=void 0,d=void 0,c=void 0,l=-1,f="";for(t=e.numWorkers;++l<t;)n=m.createWebWorker(r),m.isObject(n)?(d=n.objectUrl,c=n.worker,this.workers.push({worker:c,objectUrl:d}),this.availableWorkers.push(c)):(f=n,m.webWorkerError=!!n);this.workerError=f,this.canvas=o.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var e=[],i=0;i<256;i++)e[i]=String.fromCharCode(i);return e}(),bufferToString:function(e){for(var t=e.length,r="",n=-1;++n<t;)r+=this.byteMap[e[n]];return r},onFrameFinished:function(e){var t=this,r=t.frames,n=!!(t.options.images||[]).length,o=r.every((function(e){return!e.beingProcessed&&e.done}));t.numRenderedFrames++,n&&e(t.numRenderedFrames/r.length),t.onRenderProgressCallback(.75*t.numRenderedFrames/r.length),o?t.generatingGIF||t.generateGIF(r,t.onRenderCompleteCallback):m.requestTimeout((function(){t.processNextFrame()}),1)},processFrame:function(e){var t=this,r=(this.options,this.options),n=r.progressCallback,o=r.sampleInterval,d=this.frames,l=void 0,f=void 0,m=function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},data=e.data;delete l.data,l.pixels=Array.prototype.slice.call(data.pixels),l.palette=Array.prototype.slice.call(data.palette),l.done=!0,l.beingProcessed=!1,t.freeWorker(f),t.onFrameFinished(n)};(l=d[e]).beingProcessed||l.done?this.onFrameFinished():(l.sampleInterval=o,l.beingProcessed=!0,l.gifshot=!0,(f=this.getWorker())?(f.onmessage=m,f.postMessage(l)):m({data:t.workerMethods.run(l)}))},startRendering:function(e){this.onRenderCompleteCallback=e;for(var i=0;i<this.options.numWorkers&&i<this.frames.length;i++)this.processFrame(i)},processNextFrame:function(){for(var e=-1,i=0;i<this.frames.length;i++){var t=this.frames[i];if(!t.done&&!t.beingProcessed){e=i;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,t){var r=[],n={loop:this.repeat},o=this.options,d=o.interval,c=o.frameDuration,l=!!o.images.length,f=o.gifHeight,h=o.gifWidth,v=new O(r,h,f,n),w=this.onRenderProgressCallback,y=l?100*d:0,S=void 0;this.generatingGIF=!0,m.each(e,(function(t,r){var n=r.palette;w(.75+.25*r.position*1/e.length);for(var i=0;i<c;i++)v.addFrame(0,0,h,f,r.pixels,{palette:n,delay:y})})),v.end(),w(1),this.frames=[],this.generatingGIF=!1,m.isFunction(t)&&(S=this.bufferToString(r),t("data:image/gif;base64,"+m.btoa(S)))},setRepeat:function(e){this.repeat=e},addFrame:function(element,e){e=m.isObject(e)?e:{};var t=this,r=t.ctx,n=t.options,o=n.gifWidth,d=n.gifHeight,c=m.getFontSize(e),l=e,filter=l.filter,f=l.fontColor,h=l.fontFamily,v=l.fontWeight,text=(l.gifHeight,l.gifWidth,l.text),w=l.textAlign,y=l.textBaseline,S=e.textXCoordinate?e.textXCoordinate:"left"===w?1:"right"===w?o:o/2,C=e.textYCoordinate?e.textYCoordinate:"top"===y?1:"center"===y?d/2:d,k=v+" "+c+" "+h,x=void 0;try{r.filter=filter,r.drawImage(element,0,0,o,d),text&&(r.font=k,r.fillStyle=f,r.textAlign=w,r.textBaseline=y,r.fillText(text,S,C)),x=r.getImageData(0,0,o,d),t.addFrameImageData(x)}catch(e){return""+e}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},t=this.frames,r=e.data;this.frames.push({data:r,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:t.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var t=this;t.startRendering((function(r){t.destroyWorkers(),m.requestTimeout((function(){e(r)}),0)}))},destroyWorkers:function(){if(!this.workerError){var e=this.workers;m.each(e,(function(e,t){var r=t.worker,n=t.objectUrl;r.terminate(),m.URL.revokeObjectURL(n)}))}}};var U=function(){},R=function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},t=arguments[1];t=m.isFunction(t)?t:U;var canvas=o.createElement("canvas"),r=void 0,n=e.images,d=!!n.length,l=e.cameraStream,f=e.crop,filter=e.filter,h=e.fontColor,v=e.fontFamily,w=e.fontWeight,y=e.keepCameraOn,S=(e.numWorkers,e.progressCallback),C=e.saveRenderingContexts,k=e.savedRenderingContexts,text=e.text,x=e.textAlign,F=e.textBaseline,O=e.videoElement,W=e.videoHeight,A=e.videoWidth,R=e.webcamVideoElement,M=Number(e.gifWidth),T=Number(e.gifHeight),I=Number(e.interval),j=(Number(e.sampleInterval),d?0:1e3*I),V=[],z=k.length?k.length:e.numFrames,H=z,L=new E(e),B=m.getFontSize(e),P=e.textXCoordinate?e.textXCoordinate:"left"===x?1:"right"===x?M:M/2,N=e.textYCoordinate?e.textYCoordinate:"top"===F?1:"center"===F?T/2:T,D=w+" "+B+" "+v,G=f?Math.floor(f.scaledWidth/2):0,X=f?A-f.scaledWidth:0,Y=f?Math.floor(f.scaledHeight/2):0,J=f?W-f.scaledHeight:0,Q=function e(){var n=H-1;function o(){var o;C&&V.push(r.getImageData(0,0,M,T)),text&&(r.font=D,r.fillStyle=h,r.textAlign=x,r.textBaseline=F,r.fillText(text,P,N)),o=r.getImageData(0,0,M,T),L.addFrameImageData(o),S((z-(H=n))/z),n>0&&m.requestTimeout(e,j),H||L.getBase64GIF((function(image){t({error:!1,errorCode:"",errorMsg:"",image:image,cameraStream:l,videoElement:O,webcamVideoElement:R,savedRenderingContexts:V,keepCameraOn:y})}))}k.length?(r.putImageData(k[z-H],0,0),o()):function e(){try{X>A&&(X=A),J>W&&(J=W),G<0&&(G=0),Y<0&&(Y=0),r.filter=filter,r.drawImage(O,G,Y,X,J,0,0,M,T),o()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t;m.requestTimeout(e,100)}}()};z=z!==c?z:10,I=I!==c?I:.1,canvas.width=M,canvas.height=T,r=canvas.getContext("2d"),function e(){k.length||0!==O.currentTime?Q():m.requestTimeout(e,100)}()},M=function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},t=e.videoWidth,r=e.videoHeight,n=e.gifWidth,o=e.gifHeight,d={width:0,height:0,scaledWidth:0,scaledHeight:0};return t>r?(d.width=Math.round(t*(o/r))-n,d.scaledWidth=Math.round(d.width*(r/o))):(d.height=Math.round(r*(n/t))-o,d.scaledHeight=Math.round(d.height*(t/n))),d},T={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function e(t){e.attempts=e.attempts||0;var r=t.cameraStream,n=t.completedCallback,o=t.videoElement;o&&(o.videoWidth>0&&o.videoHeight>0?(o.removeEventListener("loadeddata",T.findVideoSize),n({videoElement:o,cameraStream:r,videoWidth:o.videoWidth,videoHeight:o.videoHeight})):e.attempts<10?(e.attempts+=1,m.requestTimeout((function(){T.findVideoSize(t)}),400)):n({videoElement:o,cameraStream:r,videoWidth:T.defaultVideoDimensions.width,videoHeight:T.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){m.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var t=m.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,r=e.cameraStream,n=e.completedCallback,o=e.streamedCallback,d=e.videoElement;if(m.isFunction(o)&&o(),t){if(m.isString(t))d.src=t,d.innerHTML='<source src="'+t+'" type="video/'+m.getExtension(t)+'" />';else if(t instanceof Blob){try{d.src=m.URL.createObjectURL(t)}catch(e){}d.innerHTML='<source src="'+t+'" type="'+t.type+'" />'}}else if(d.mozSrcObject)d.mozSrcObject=r;else if(m.URL)try{d.srcObject=r,d.src=m.URL.createObjectURL(r)}catch(e){d.srcObject=r}d.play(),m.requestTimeout((function e(){e.count=e.count||0,!0===T.loadedData?(T.findVideoSize({videoElement:d,cameraStream:r,completedCallback:n}),T.loadedData=!1):(e.count+=1)>10?T.findVideoSize({videoElement:d,cameraStream:r,completedCallback:n}):e()}),0)},startStreaming:function(e){var t=m.isFunction(e.error)?e.error:m.noop,r=m.isFunction(e.streamed)?e.streamed:m.noop,n=m.isFunction(e.completed)?e.completed:m.noop,d=e.crossOrigin,c=e.existingVideo,l=e.lastCameraStream,f=e.options,h=e.webcamVideoElement,v=m.isElement(c)?c:h||o.createElement("video");d&&(v.crossOrigin=f.crossOrigin),v.autoplay=!0,v.loop=!0,v.muted=!0,v.addEventListener("loadeddata",(function(e){T.loadedData=!0,f.offset&&(v.currentTime=f.offset)})),c?T.stream({videoElement:v,existingVideo:c,completedCallback:n}):l?T.stream({videoElement:v,cameraStream:l,streamedCallback:r,completedCallback:n}):m.getUserMedia({video:!0},(function(e){T.stream({videoElement:v,cameraStream:e,streamedCallback:r,completedCallback:n})}),t)},startVideoStreaming:function(e){var t=arguments.length>1&&arguments[1]!==c?arguments[1]:{},r=t.timeout!==c?t.timeout:0,n=t.callback,o=t.webcamVideoElement,d=void 0;r>0&&(d=m.requestTimeout((function(){T.onStreamingTimeout(n)}),1e4)),T.startStreaming({error:function(){n({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(d)},completed:function(){var t=arguments.length>0&&arguments[0]!==c?arguments[0]:{},r=t.cameraStream,n=t.videoElement,o=t.videoHeight,d=t.videoWidth;e({cameraStream:r,videoElement:n,videoHeight:o,videoWidth:d})},lastCameraStream:t.lastCameraStream,webcamVideoElement:o,crossOrigin:t.crossOrigin,options:t})},stopVideoStreaming:function(e){var t=e=m.isObject(e)?e:{},r=t.keepCameraOn,n=t.videoElement,o=t.webcamVideoElement,d=e.cameraStream||{},c=d.getTracks&&d.getTracks()||[],l=!!c.length,f=c[0];!r&&l&&m.isFunction(f.stop)&&f.stop(),m.isElement(n)&&!o&&(n.pause(),m.isFunction(m.URL.revokeObjectURL)&&!m.webWorkerError&&n.src&&m.URL.revokeObjectURL(n.src),m.removeElement(n))}};function I(e){e=m.isObject(e)?e:{},T.stopVideoStreaming(e)}function j(e,t){var r=e.options||{},n=r.images,video=r.video,d=Number(r.gifWidth),c=Number(r.gifHeight),l=(Number(r.numFrames),e.cameraStream),f=e.videoElement,h=e.videoWidth,v=e.videoHeight,w=M({videoWidth:h,videoHeight:v,gifHeight:c,gifWidth:d}),y=t;r.crop=w,r.videoElement=f,r.videoWidth=h,r.videoHeight=v,r.cameraStream=l,m.isElement(f)&&(f.width=d+w.width,f.height=c+w.height,r.webcamVideoElement||(m.setCSSAttr(f,{position:"fixed",opacity:"0"}),o.body.appendChild(f)),f.play(),R(r,(function(e){n&&n.length||video&&video.length||I(e),y(e)})))}function V(e,t){if(t=m.isFunction(e)?e:t,e=m.isObject(e)?e:{},m.isFunction(t)){var r=m.mergeOptions(S,e)||{},n=e.cameraStream,d=r.images,l=d?d.length:0,video=r.video,f=r.webcamVideoElement;r=m.mergeOptions(r,{gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),l?function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},t=e.callback,r=e.images,n=e.options,d=e.imagesLength,l={getUserMedia:!0,"window.URL":!0},f=v.validate(l),h=[],w=0,y=void 0,S=void 0;if(f.error)return t(f);function C(){m.each(h,(function(e,t){t&&(t.text?S.addFrame(t.img,n,t.text):S.addFrame(t,n))})),A(S,t)}S=new E(n),m.each(r,(function(e,image){var r=image;image.src&&(r=r.src),m.isElement(r)?(n.crossOrigin&&(r.crossOrigin=n.crossOrigin),h[e]=r,(w+=1)===d&&C()):m.isString(r)&&(y=new Image,n.crossOrigin&&(y.crossOrigin=n.crossOrigin),function(n){image.text&&(n.text=image.text),n.onerror=function(e){var r=void 0;if(0==--d)return(r={}).error="None of the requested images was capable of being retrieved",t(r)},n.onload=function(t){image.text?h[e]={img:n,text:n.text}:h[e]=n,(w+=1)===d&&C(),m.removeElement(n)},n.src=r}(y),m.setCSSAttr(y,{position:"fixed",opacity:"0"}),o.body.appendChild(y))}))}({images:d,imagesLength:l,callback:t,options:r}):video?function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},t=e.callback,r=e.existingVideo,n=e.options,o={getUserMedia:!0,"window.URL":!0},d=v.validate(o),l=void 0,f=void 0;if(d.error)return t(d);if(m.isElement(r)&&r.src){if(f=r.src,l=m.getExtension(f),!m.isSupported.videoCodecs[l])return t(v.messages.videoCodecs)}else m.isArray(r)&&m.each(r,(function(e,t){if(l=t instanceof Blob?t.type.substr(t.type.lastIndexOf("/")+1,t.length):t.substr(t.lastIndexOf(".")+1,t.length),m.isSupported.videoCodecs[l])return r=t,!1}));T.startStreaming({completed:function(e){e.options=n||{},j(e,t)},existingVideo:r,crossOrigin:n.crossOrigin,options:n})}({existingVideo:video,callback:t,options:r}):function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{},t=e.callback,r=e.lastCameraStream,n=e.options,o=e.webcamVideoElement;if(!k())return t(v.validate());n.savedRenderingContexts.length?R(n,(function(e){t(e)})):T.startVideoStreaming((function(){var e=arguments.length>0&&arguments[0]!==c?arguments[0]:{};e.options=n||{},j(e,t)}),{lastCameraStream:r,callback:t,webcamVideoElement:o,crossOrigin:n.crossOrigin})}({lastCameraStream:n,callback:t,webcamVideoElement:f,options:r})}}var z={utils:h,error:w,defaultOptions:C,createGIF:V,takeSnapShot:function(e,t){if(t=m.isFunction(e)?e:t,e=m.isObject(e)?e:{},m.isFunction(t)){var r=m.mergeOptions(S,e);V(m.mergeOptions(r,{interval:.1,numFrames:1,gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),t)}},stopVideoStreaming:I,isSupported:function(){return v.isValid()},isWebCamGIFSupported:k,isExistingVideoGIFSupported:function(e){var t=!1;if(m.isArray(e)&&e.length){if(m.each(e,(function(e,r){m.isSupported.videoCodecs[r]&&(t=!0)})),!t)return!1}else if(m.isString(e)&&e.length&&!m.isSupported.videoCodecs[e])return!1;return v.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return v.isValid({getUserMedia:!0})},VERSION:"0.4.5"};(n=function(){return z}.apply(t,[]))===c||(e.exports=n)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})}}]);